<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title> Day Chunks - home page </title>
		<link rel="stylesheet" href="colors.css">
		<link rel="stylesheet" href="style.css">
		<link rel="stylesheet" href="main-styling.css">
		<script defer src="/__/firebase/10.10.0/firebase-app-compat.js"></script>
		<!-- include only the Firebase features as you need -->
		<script defer src="/__/firebase/10.10.0/firebase-auth-compat.js"></script>
		<script defer src="/__/firebase/10.10.0/firebase-database-compat.js"></script>
		<script defer src="/__/firebase/10.10.0/firebase-firestore-compat.js"></script>
		<script defer src="/__/firebase/10.10.0/firebase-functions-compat.js"></script>
		<script defer src="/__/firebase/10.10.0/firebase-messaging-compat.js"></script>
		<script defer src="/__/firebase/10.10.0/firebase-storage-compat.js"></script>
		<script defer src="/__/firebase/10.10.0/firebase-analytics-compat.js"></script>
		<script defer src="/__/firebase/10.10.0/firebase-remote-config-compat.js"></script>
		<script defer src="/__/firebase/10.10.0/firebase-performance-compat.js"></script>
		<!-- 
			initialize the SDK after all desired features are loaded, set useEmulator to false
			to avoid connecting the SDK to running emulators.
		-->
		<script defer src="/__/firebase/init.js?useEmulator=true"></script>
	</head>
	<body class="flex-container">
		<header class="section" >
			<div class="menu-container">
				<h1 style="display: inline;" id="label">Day Chunks</h1>
				<div id="filler"></div>
				<button hidden="true" class="sign-button" id="sign-out-button"><b>Sign Out</b></button>
			</div>
		</header>
		<nav hidden="true">
			<div class="menu-container">
				<button class="highlighted" >Excute</button>
				<button >Plan</button>
				<button >Watch</button>
			</div>
		</nav>
		<main hidden="true" class="section" id="main-signed-in">
		</main>
		<main hidden="true" class="section" id="main-signed-out">
			<div>
				<h2>are you singed out?</h2>
				<span>try singing in to start your use of this useful app!</span>
				<button hidden="true" class="sign-button" id="sign-in-button"><b>Sign In With Google</b></button>
			</div>

		</main>
		<footer class="section">
			<p>
				<span>Day Chunks is a time management app that aims to section your day into managable chunks.</span><br/>
				<span>Owner: Mustafa El-rashied</span><br/>
				<span>Contact: karkarcomp@gmail.com</span><br/>
				<span>made using firebase, html, css, and javascript</span><br/>
			</p>
		</footer>
		<script>
			
			document.addEventListener('DOMContentLoaded', function() {
				
				function TurnHiddenPropery(elements,value) {
					elements.forEach(element => {
						element.hidden = value;
					});
				}

				try {
					let app = firebase.app();
					let features = [
						'auth', 
						'database', 
						'firestore',
						'functions',
						'messaging', 
						'storage', 
						'analytics', 
						'remoteConfig',
						'performance',
					].filter(feature => typeof app[feature] === 'function');

					const Auth = firebase.auth();

					const SignInButton       = document.getElementById("sign-in-button");
					const SignOutButton      = document.getElementById("sign-out-button");
					const nav                = document.getElementsByTagName("nav")[0];
					const MainSectionSignIn  = document.getElementById("main-signed-in");
					const MainSectionSignOut = document.getElementById("main-signed-out");

					const Provider = new firebase.auth.GoogleAuthProvider();
					SignInButton.onclick = () => Auth.signInWithPopup(Provider);
					SignOutButton.onclick = () => Auth.signOut();
					
					const sign_in_releated_elements = [SignOutButton,nav,MainSectionSignIn];
					const sign_out_releated_elements = [SignInButton,MainSectionSignOut];

					Auth.onAuthStateChanged(user => {
						if (user) {
							TurnHiddenPropery(sign_out_releated_elements,true)
							TurnHiddenPropery(sign_in_releated_elements,false);
						} else {
							TurnHiddenPropery(sign_out_releated_elements,false)
							TurnHiddenPropery(sign_in_releated_elements,true);
						}
					});
				} catch (e) {
					console.error(e);
					loadEl.textContent = 'Error loading the Firebase SDK, check the console.';
				}

			});
		</script>
	</body>
</html>
